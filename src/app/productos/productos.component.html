<div class="productos-container">
  <!-- Banner de presentación -->
  <section class="productos-banner">
    <div class="text-container">
      <h1>Catálogo de Amigurumis</h1>
      <p>Descubrí nuestro catálogo de amigurumis y sets personalizados.</p>
      <button mat-button class="btn-medidas" (click)="openModal()">Ver tabla de medidas</button>
    </div>
  </section>

  <!-- Tabs para elegir entre "Productos" y "Sets" -->
  <mat-tab-group #tabGroup>
    <!-- Tab de Productos -->
    <mat-tab label="Productos">
      <section class="productos-grid">
        <mat-card appearance="outlined" *ngFor="let product of products">

          <app-product-gallery [images]="product.images"></app-product-gallery>
          <mat-card-title>{{ product.name }}</mat-card-title>

          <mat-card-content>
            <p>{{ product.description }}</p>
            <span>Tamaño: {{ product.size }}</span>
          </mat-card-content>

          <mat-card-content>
            <p class="precio"> {{ formatPrecio(product.precio) }}</p>
          </mat-card-content>

          <mat-card-actions>
            <button mat-button color="accent" (click)="addToCart(product)">
              Agregar al carrito
            </button>
            <div class="cantidad-botones">
              <!-- Botón de “–” (restar localmente) -->
              <button mat-button color="warn" (click)="decrementLocal(product)">
                <mat-icon>remove</mat-icon>
              </button>

              <!-- Muestra la cantidad local -->
              <span style="margin: 0 8px;">
                {{ product.selectedQuantity }}
              </span>

              <!-- Botón de “+” (sumar localmente) -->
              <button mat-button color="primary" (click)="incrementLocal(product)">
                <mat-icon>add</mat-icon>
              </button>
            </div>
          </mat-card-actions>

        </mat-card>
      </section>
    </mat-tab>

    <!-- Tab de Sets -->
    <mat-tab label="Sets Personalizados">
      <section class="productos-grid sets">
        <mat-card appearance="outlined" *ngFor="let set of sets">

          <app-product-gallery [images]="set.images"></app-product-gallery>
          <mat-card-title>{{ set.name }}</mat-card-title>

          <mat-card-content>
            <p>{{ set.description }}</p>
          </mat-card-content>

          <mat-card-content>
            <p class="precio">{{ formatPrecio(set.precio) }}</p>
            <p>Unidades: {{ set.unidades }}</p>
          </mat-card-content>

          <mat-card-actions>

            <button mat-button color="accent" (click)="addToCart(set)">
              Agregar al carrito
            </button>

            <div class="cantidad-botones">
              <!-- Botón de “–” (restar localmente) -->
              <button mat-button color="warn" (click)="decrementLocal(set)">
                <mat-icon>remove</mat-icon>
              </button>

              <!-- Muestra la cantidad local -->
              <span style="margin: 0 8px;">
                {{ set.selectedQuantity }}
              </span>

              <!-- Botón de “+” (sumar localmente) -->
              <button mat-button color="primary" (click)="incrementLocal(set)">
                <mat-icon>add</mat-icon>
              </button>
            </div>


          </mat-card-actions>

        </mat-card>
      </section>
    </mat-tab>

    <!-- Tab de Novedades -->
    <mat-tab label="Novedades">
      <section class="productos-grid sets">
        <mat-card appearance="outlined" *ngFor="let novedad of novedades">

          <app-product-gallery [images]="novedad.images"></app-product-gallery>
          <mat-card-title>{{ novedad.name }}</mat-card-title>

          <mat-card-content>
            <p>{{ novedad.description }}</p>
          </mat-card-content>

          <mat-card-content>
            <p class="precio">{{ formatPrecio(novedad.precio) }}</p>
          </mat-card-content>

          <mat-card-actions>
            <button mat-button color="accent" (click)="addToCart(novedad)">
              Agregar al carrito
            </button>

            <div class="cantidad-botones">
              <!-- Botón de “–” (restar localmente) -->
              <button mat-button color="warn" (click)="decrementLocal(novedad)">
                <mat-icon>remove</mat-icon>
              </button>

              <!-- Muestra la cantidad local -->
              <span style="margin: 0 8px;">
                {{ novedad.selectedQuantity }}
              </span>

              <!-- Botón de “+” (sumar localmente) -->
              <button mat-button color="primary" (click)="incrementLocal(novedad)">
                <mat-icon>add</mat-icon>
              </button>
            </div>
          </mat-card-actions>
        </mat-card>

      </section>
    </mat-tab>

  </mat-tab-group>

  <!-- Sección final “No encuentras tu Amigurumi?” -->
  <section class="productos-banner">
    <h3>¿No encontrás tu Amigurumi?</h3>
    <p>Si no lo ves en nuestro catálogo, contáctanos para realizar un pedido personalizado.</p>
    <button mat-raised-button color="primary" [routerLink]="['/contacto']">Contactar</button>
  </section>
</div>

<div class="modal-overlay" [class.open]="modalAbierto">
  <div class="modal-content">
    <button class="cerrar" (click)="closeModal()">×</button>
    <h2>Tabla de Medidas</h2>
    <table>
      <thead>
        <tr>
          <th>Tamaño</th>
          <th>Altura (cm)</th>
          <th>Ancho (cm)</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Peque</td>
          <td>10 - 15</td>
          <td>6 - 10</td>
        </tr>
        <tr>
          <td>Mediano</td>
          <td>16 - 25</td>
          <td>11 - 18</td>
        </tr>
        <tr>
          <td>Grande</td>
          <td>26 - 35</td>
          <td>19 - 25</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
